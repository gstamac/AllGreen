var AllGreen;(function(n){(function(n){n[n.Running=0]="Running",n[n.Failed=1]="Failed",n[n.Undefined=2]="Undefined",n[n.Passed=3]="Passed",n[n.Skipped=4]="Skipped"})(n.SpecStatus||(n.SpecStatus={}));var t=n.SpecStatus,i=function(){function i(){this.DEFAULT_SERVER_STATUS="Connecting...",this.DEFAULT_RUNNER_STATUS="Waiting...",this.totalStatus=null}return i.prototype.reset=function(){this.setServerStatus(this.DEFAULT_SERVER_STATUS),this.setRunnerStatus(this.DEFAULT_RUNNER_STATUS),this.getSpecResultsElement().text(""),this.totalStatus=null},i.prototype.setServerStatus=function(n){this.getServerStatusElement().html(n)},i.prototype.setRunnerStatus=function(n){this.getRunnerStatusElement().html(n)},i.prototype.setSpecStatus=function(n){var t=this.getSpecElement(n);this.setSpecElementClass(t,n.status),this.setSpecElementSteps(t,n.steps),this.updateSuiteStatus(n.suite,n.status)},i.prototype.getServerStatusElement=function(){return $("#server-status")},i.prototype.getRunnerStatusElement=function(){return $("#runner-status")},i.prototype.getSpecResultsElement=function(){return $("#spec-results")},i.prototype.getSpecElement=function(n){var t=$("#spec-"+n.id);return t.length<=0&&(t=this.createSpecElement(n)),t},i.prototype.createSpecElement=function(n){var i=this.getSuiteContentElement(n.suite),t=$("<div/>").addClass("spec").prop("id","spec-"+n.id);return $("<a/>").prop("href","#").html(n.name).addClass("spec-name").click(function(){$("#spec-"+n.id+" > .spec-steps").toggle()}).appendTo(t),t.appendTo(i),t},i.prototype.setSpecElementClass=function(n,t){n.prop("class","spec "+this.statusClass(t))},i.prototype.setSpecElementSteps=function(n,t){var i=n.children(".spec-steps"),f,r,u;if(t&&t.length)for(i.length||(i=$("<div/>").addClass("spec-steps"),i.appendTo(n)),i.html(""),f=0;f<t.length;f++)r=t[f],u=$("<div/>").html(r.message).addClass("spec-step"),r.status?u.addClass(this.statusClass(r.status)):u.addClass("log"),r.trace&&$("<div/>").html(r.trace.replace(/\n/g,"<br/>")).addClass("spec-step-trace").appendTo(u),u.appendTo(i);else i.length&&i.remove()},i.prototype.updateSuiteStatus=function(n,t){var i;n?(i=$("#suite-"+n.id),i&&(n.status=this.investigateSuiteStatus(i.children(".suite-content")),this.setSuiteElementClass(i,n.status)),this.updateSuiteStatus(n.parentSuite,t)):(i=this.getSpecResultsElement(),i&&(this.totalStatus=this.investigateSuiteStatus(i),this.setSuiteElementClass(i,this.totalStatus)))},i.prototype.investigateSuiteStatus=function(t){return t.children(".running").length?n.SpecStatus.Running:t.children(".failed").length?n.SpecStatus.Failed:t.children(".undefined").length?n.SpecStatus.Undefined:t.children(".passed").length?n.SpecStatus.Passed:n.SpecStatus.Skipped},i.prototype.setSuiteElementClass=function(n,t){n.prop("class","suite "+this.statusClass(t))},i.prototype.getSuiteContentElement=function(n){if(n){var t=$("#suite-"+n.id+" > .suite-content");return t.length<=0&&(t=this.createSuiteElement(n).children(".suite-content")),t}return this.getSpecResultsElement()},i.prototype.createSuiteElement=function(n){var i=this.getSuiteContentElement(n.parentSuite),t=$("<div/>").addClass("suite").prop("id","suite-"+n.id);return $("<a/>").prop("href","#").html(n.name).addClass("suite-name").click(function(){$("#suite-"+n.id+" > .suite-content").toggle()}).appendTo(t),$("<div/>").addClass("suite-content").appendTo(t),t.appendTo(i),t},i.prototype.statusClass=function(n){var i=t[n];return i.toLowerCase()},i}();n.Reporter=i})(AllGreen||(AllGreen={})),function(){var n=AllGreen.App.getCurrent();n!=null&&(console.log("registering reporter factory"),n.setReporter(new AllGreen.Reporter))}()