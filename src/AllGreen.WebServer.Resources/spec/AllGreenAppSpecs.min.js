var _this=this;describe("App",function(){beforeEach(function(){jasmine.getFixtures().fixturesPath="";var n=readFixtures("Client/client.html");n=n.replace(/<script[^>]*><\/script>/g,""),n=n.replace(/<script[^>]*>[^<]*AllGreen\.startApp()[^<]*<\/script>/g,""),setFixtures(n),_this.app=new AllGreen.App}),afterEach(function(){_this.app=null}),it("Can use custom reporter",function(){var t={},n;_this.app.setReporter(t),n=jasmine.createSpyObj("adapterFactory1",["create"]),n.create.andReturn({start:function(){}}),_this.app.registerAdapterFactory(n),_this.app.start(),expect(n.create).toHaveBeenCalledWith(t)}),it("Sets server status",function(){var n=jasmine.createSpyObj("reporter",["setServerStatus"]);_this.app.setReporter(n),_this.app.setServerStatus("server status"),expect(n.setServerStatus).toHaveBeenCalledWith("server status")}),it("Creates adapters on start",function(){var t=jasmine.createSpyObj("adapterFactory1",["create"]),n;t.create.andReturn({start:function(){}}),n=jasmine.createSpyObj("adapterFactory2",["create"]),n.create.andReturn({start:function(){}}),_this.app.registerAdapterFactory(t),_this.app.registerAdapterFactory(n),_this.app.start(),expect(t.create).toHaveBeenCalled(),expect(n.create).toHaveBeenCalled()}),it("Adapters start is called",function(){var i=jasmine.createSpyObj("adapter1",["start"]),r=jasmine.createSpyObj("adapterFactory1",["create"]),n,t;r.create.andReturn(i),n=jasmine.createSpyObj("adapter2",["start"]),t=jasmine.createSpyObj("adapterFactory2",["create"]),t.create.andReturn(n),_this.app.registerAdapterFactory(r),_this.app.registerAdapterFactory(t),_this.app.start(),expect(i.start).toHaveBeenCalled(),expect(n.start).toHaveBeenCalled()}),it("Can be reset",function(){var t=jasmine.createSpyObj("reporter",["reset"]),n;_this.app.setReporter(t),n=jasmine.createSpyObj("adapterFactory1",["create"]),n.create.andReturn({start:function(){}}),_this.app.registerAdapterFactory(n),_this.app.reset(),expect(t.reset).toHaveBeenCalled(),_this.app.start(),expect(n.create).not.toHaveBeenCalled(),expect($("#runner")).toHaveAttr("src","about:blank")}),it("Can be reloaded",function(){var t=jasmine.createSpyObj("reporter",["reset"]),n;_this.app.setReporter(t),n=jasmine.createSpyObj("adapterFactory1",["create"]),n.create.andReturn({start:function(){}}),_this.app.registerAdapterFactory(n),_this.app.reload(),expect($("#runner")).toHaveAttr("src","runner.html")})})