var _this=this;describe("App",function(){beforeEach(function(){jasmine.getFixtures().fixturesPath="";var n=readFixtures("Client/client.html");n=n.replace(/<script[^>]*><\/script>/g,""),n=n.replace(/<script[^>]*>[^<]*AllGreen\.startApp()[^<]*<\/script>/g,""),setFixtures(n),_this.app=new AllGreen.App}),afterEach(function(){_this.app=null}),it("Reports server status",function(){var n=jasmine.createSpyObj("serverReporter",["setServerStatus"]);_this.app.setServerReporter(n),_this.app.setServerStatus("server status"),expect(n.setServerStatus).toHaveBeenCalledWith("server status")}),it("Checks isReady for all reporters",function(){var t={isReady:function(){return!0}},n;_this.app.registerRunnerReporter(t),n={isReady:function(){return!1}},_this.app.registerRunnerReporter(n),expect(_this.app.isReady()).toBeFalsy(),n.isReady=function(){return!0},expect(_this.app.isReady()).toBeTruthy()}),["reset","started","finished","specUpdated"].forEach(function(n){it("Forwards '"+n+"' to multiple reporters",function(){var i=jasmine.createSpyObj("runnerReporter1",[n]),t;_this.app.registerRunnerReporter(i),t=jasmine.createSpyObj("runnerReporter2",[n]),_this.app.registerRunnerReporter(t),_this.app[n](),expect(i[n]).toHaveBeenCalled(),expect(t[n]).toHaveBeenCalled()})}),it("Creates adapters on start",function(){var t=jasmine.createSpyObj("adapterFactory1",["create"]),n;t.create.andReturn({start:function(){}}),n=jasmine.createSpyObj("adapterFactory2",["create"]),n.create.andReturn({start:function(){}}),_this.app.registerAdapterFactory(t),_this.app.registerAdapterFactory(n),_this.app.start(),expect(t.create).toHaveBeenCalledWith(_this.app),expect(n.create).toHaveBeenCalledWith(_this.app)}),it("Should start after all reporters are ready",function(){var n=jasmine.createSpyObj("adapterFactory",["create"]),t={isReady:function(){return!1}};runs(function(){n.create.andReturn({start:function(){}}),_this.app.registerAdapterFactory(n),_this.app.registerRunnerReporter(t),_this.app.start(),expect(n.create.callCount).toBe(0),t.isReady=function(){return!0}}),waits(20),runs(function(){expect(n.create).toHaveBeenCalledWith(_this.app)})}),it("Adapters start is called",function(){var i=jasmine.createSpyObj("adapter1",["start"]),r=jasmine.createSpyObj("adapterFactory1",["create"]),n,t;r.create.andReturn(i),n=jasmine.createSpyObj("adapter2",["start"]),t=jasmine.createSpyObj("adapterFactory2",["create"]),t.create.andReturn(n),_this.app.registerAdapterFactory(r),_this.app.registerAdapterFactory(t),_this.app.start(),expect(i.start).toHaveBeenCalled(),expect(n.start).toHaveBeenCalled()}),it("Can be reloaded",function(){var t=jasmine.createSpyObj("runnerReporter",["reset","isReady"]),n;t.isReady.andCallFake(function(){return!0}),_this.app.registerRunnerReporter(t),n=jasmine.createSpyObj("adapterFactory1",["create"]),n.create.andReturn({start:function(){}}),_this.app.registerAdapterFactory(n),_this.app.reload(),expect(t.reset).toHaveBeenCalled(),expect($("#runner")).toHaveAttr("src","runner.html"),_this.app.start(),expect(n.create).not.toHaveBeenCalled()}),it("Enables reconnect by default",function(){expect(_this.app.reconnectEnabled).toBeTruthy()}),it("Can enable/disable reconnect",function(){_this.app.enableReconnect(!0),expect(_this.app.reconnectEnabled).toBeTruthy(),_this.app.enableReconnect(!1),expect(_this.app.reconnectEnabled).toBeFalsy(),_this.app.enableReconnect(!0),expect(_this.app.reconnectEnabled).toBeTruthy()})});
//# sourceMappingURL=AllGreenAppSpecs.min.js.map